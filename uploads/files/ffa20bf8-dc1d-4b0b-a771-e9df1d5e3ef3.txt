1) Code cá»§a em lÃ  TCP hay UDP?

Tráº£ lá»i: TCP.

Giáº£i thÃ­ch 1 cÃ¢u: VÃ¬ há»‡ thá»‘ng dÃ¹ng HTTP/REST vÃ  WebSocket, mÃ  WebSocket cháº¡y trÃªn TCP (káº¿t ná»‘i á»•n Ä‘á»‹nh, Ä‘áº£m báº£o thá»© tá»±, khÃ´ng máº¥t gÃ³i).

Náº¿u tháº§y báº¯t chá»‰ ra code:

Báº¡n cÃ³ REST API dáº¡ng /api/... trong controller (cháº¡y qua HTTP â†’ TCP):

@RestController
@RequestMapping("/api/posts")
public class PostController { ... }


Pháº§n WebSocket cá»§a báº¡n dÃ¹ng Spring WebSocket (báº£n cháº¥t lÃ  TCP). (Náº¿u tháº§y há»i file WS handler/config thÃ¬ báº¡n má»Ÿ file ChatWebSocketHandler/WebSocketConfig cá»§a báº¡n.)


2) Há»‡ thá»‘ng Ä‘a luá»“ng hay Ä‘Æ¡n luá»“ng?

Tráº£ lá»i: Äa luá»“ng.

Giáº£i thÃ­ch 1 cÃ¢u: Spring Boot server xá»­ lÃ½ nhiá»u request / nhiá»u WebSocket connection cÃ¹ng lÃºc, má»—i request/connection thÆ°á»ng Ä‘Æ°á»£c xá»­ lÃ½ trÃªn thread riÃªng (thread pool).

Náº¿u tháº§y há»i â€œcode Ä‘a luá»“ng chá»— nÃ o?â€

Báº¡n khÃ´ng tá»± new Thread() trong code Post (vÃ¬ Spring xá»­ lÃ½ Ä‘a luá»“ng á»Ÿ server container), nhÆ°ng cÃ³ dáº¥u hiá»‡u rÃµ: báº¡n viáº¿t API phá»¥c vá»¥ nhiá»u user Ä‘á»“ng thá»i + WebSocket chat realtime.

Báº¡n cÃ³ dÃ¹ng cáº¥u trÃºc thread-safe kiá»ƒu ConcurrentHashMap trong WebSocket handler (náº¿u Ä‘Ãºng nhÆ° file chat báº¡n Ä‘Ã£ gá»­i trÆ°á»›c Ä‘Ã³) â†’ Ä‘Ã³ lÃ  dáº¥u hiá»‡u xá»­ lÃ½ Ä‘á»“ng thá»i.



3) Äa tuyáº¿n / Ä‘Æ¡n tuyáº¿n lÃ  gÃ¬? Há»‡ thá»‘ng em loáº¡i nÃ o?

Tráº£ lá»i: Äa tuyáº¿n (multi-connection / nhiá»u luá»“ng giao tiáº¿p).

NÃ³i ngáº¯n gá»n:

ÄÆ¡n tuyáº¿n: 1 luá»“ng/1 Ä‘Æ°á»ng truyá»n xá»­ lÃ½ tuáº§n tá»± tá»«ng client.

Äa tuyáº¿n: nhiá»u client káº¿t ná»‘i Ä‘á»“ng thá»i â†’ server xá»­ lÃ½ song song.

Há»‡ thá»‘ng cá»§a báº¡n: nhiá»u user online cÃ¹ng lÃºc + chat + feed â†’ Ä‘a tuyáº¿n.



4) Em dÃ¹ng cÃ´ng nghá»‡ gÃ¬ trong bÃ i? (nÃ³i Ä‘Ãºng â€œbÃ i máº¡ngâ€)

Tráº£ lá»i gá»n (Ä‘Ãºng trá»ng tÃ¢m):

REST API (HTTP) cho Ä‘Äƒng nháº­p/Ä‘Äƒng bÃ i/comment

WebSocket cho chat/thá»i gian thá»±c

SQL Server lÆ°u trá»¯

JWT + Spring Security xÃ¡c thá»±c/ phÃ¢n quyá»n

BCrypt Ä‘á»ƒ hash máº­t kháº©u



5) Táº¡i sao dÃ¹ng WebSocket?

Tráº£ lá»i: VÃ¬ chat/ tÆ°Æ¡ng tÃ¡c realtime cáº§n Ä‘á»™ trá»… tháº¥p vÃ  Ä‘áº©y dá»¯ liá»‡u 2 chiá»u.

So sÃ¡nh 1 cÃ¢u:

HTTP thÆ°á»ng: pháº£i request liÃªn tá»¥c (polling) má»›i cáº­p nháº­t.

WebSocket: káº¿t ná»‘i 1 láº§n, server Ä‘áº©y tin ngay.



6) Æ¯u nhÆ°á»£c Ä‘iá»ƒm WebSocket so vá»›i cÃ´ng nghá»‡ khÃ¡c
So vá»›i HTTP Polling/Long Polling

âœ… Æ¯u: realtime tháº­t, Ã­t request thá»«a, mÆ°á»£t
âŒ NhÆ°á»£c: quáº£n lÃ½ káº¿t ná»‘i khÃ³ hÆ¡n, scale khÃ³ hÆ¡n HTTP

So vá»›i UDP

âœ… TCP/WebSocket: Ä‘áº£m báº£o Ä‘Ãºng thá»© tá»± â€“ khÃ´ng máº¥t gÃ³i (phÃ¹ há»£p chat)
âŒ UDP: nhanh nhÆ°ng máº¥t gÃ³i â†’ chat dá»… lá»—i, thiáº¿u tin



7) Báº£o máº­t báº±ng gÃ¬? (chá»‰ ra code)
(A) JWT + Spring Security (xÃ¡c thá»±c & phÃ¢n quyá»n)

Tráº£ lá»i: Em dÃ¹ng Spring Security + JWT Ä‘á»ƒ báº£o vá»‡ API.

Chá»‰ ra code â€“ SecurityConfig (báº¯t login, phÃ¢n quyá»n admin):

.authorizeHttpRequests(auth -> auth
  .requestMatchers("/api/auth/**", "/error").permitAll()
  .requestMatchers("/api/admin/**").hasRole("ADMIN")
  .anyRequest().authenticated()
)
.addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)
.sessionManagement(sm -> sm.sessionCreationPolicy(SessionCreationPolicy.STATELESS))
.csrf(csrf -> csrf.disable())


(Trong SecurityConfig.txt)

Chá»‰ ra code â€“ JwtAuthFilter (Ä‘á»c Bearer token, set Authentication):

String auth = request.getHeader("Authorization");
if (auth == null || !auth.startsWith("Bearer ")) { ... }

String token = auth.substring(7);
Claims claims = jwtUtil.parseClaims(token);
String userId = claims.getSubject();
String role = (String) claims.get("role");
var authorities = List.of(new SimpleGrantedAuthority("ROLE_" + role));
SecurityContextHolder.getContext().setAuthentication(
  new UsernamePasswordAuthenticationToken(userId, null, authorities)
);


(Trong JwtAuthFilter.txt)

Chá»‰ ra code â€“ JwtUtil (kÃ½ token + háº¿t háº¡n):

.setExpiration(exp)
.signWith(Keys.hmacShaKeyFor(secret.getBytes(UTF_8)), SignatureAlgorithm.HS256)


(Trong JwtUtil.txt)

(B) BCrypt hash máº­t kháº©u

Tráº£ lá»i: máº­t kháº©u Ä‘Æ°á»£c hash báº±ng BCrypt.

Chá»‰ ra code:

@Bean
public PasswordEncoder passwordEncoder() {
  return new BCryptPasswordEncoder();
}


(Trong SecurityConfig.txt)




8) Báº£o máº­t 2 lá»›p hay 3 lá»›p?

Tráº£ lá»i: 3 lá»›p á»Ÿ táº§ng á»©ng dá»¥ng.

Hash máº­t kháº©u: BCrypt (khÃ´ng lÆ°u plaintext)

XÃ¡c thá»±c: JWT (token cÃ³ háº¡n)

PhÃ¢n quyá»n: role USER/ADMIN + cháº·n endpoint admin

Náº¿u tháº§y há»i â€œcÃ³ HTTPS chÆ°a?â€ â†’ tráº£ lá»i tháº³ng: khi cháº¡y local lÃ  HTTP, deploy tháº­t má»›i báº­t HTTPS (táº§ng háº¡ táº§ng).



9) Em cÃ³ chá»‘ng SQL Injection khÃ´ng? (chá»‰ code)

Tráº£ lá»i: CÃ³, vÃ¬ dÃ¹ng JPA + query tham sá»‘ (khÃ´ng ná»‘i chuá»—i SQL).

Chá»‰ ra code â€“ PostRepository dÃ¹ng @Param:

@Query("""
  SELECT p FROM Post p
  LEFT JOIN FETCH p.user u
  WHERE p.postId = :postId
""")
Optional<Post> findByIdWithUser(@Param("postId") Integer postId);




10) DDoS cÃ³ chá»‘ng khÃ´ng?

Tráº£ lá»i Ä‘Ãºng trá»ng tÃ¢m:

JWT/Security khÃ´ng pháº£i chá»‘ng DDoS.

DDoS cáº§n rate limit / WAF / reverse proxy (Nginx, Cloudflare) á»Ÿ táº§ng háº¡ táº§ng.

á» Ä‘á»“ Ã¡n, em má»›i lÃ m báº£o vá»‡ truy cáº­p báº±ng auth/role.

â€œCÃ¢u tráº£ lá»i 20 giÃ¢yâ€ náº¿u tháº§y há»i dá»“n

Há»‡ thá»‘ng em cháº¡y theo mÃ´ hÃ¬nh clientâ€“server, dÃ¹ng REST API vÃ  WebSocket. WebSocket vÃ  HTTP Ä‘á»u cháº¡y trÃªn TCP. 
Server Spring Boot xá»­ lÃ½ nhiá»u request/káº¿t ná»‘i Ä‘á»“ng thá»i nÃªn lÃ  Ä‘a luá»“ng vÃ  Ä‘a tuyáº¿n. 
Báº£o máº­t gá»“m BCrypt hash máº­t kháº©u, JWT xÃ¡c thá»±c stateless vÃ  phÃ¢n quyá»n role admin/user. 
SQL injection Ä‘Æ°á»£c háº¡n cháº¿ nhá» JPA query tham sá»‘. 
DDoS thÃ¬ cáº§n rate limit/WAF á»Ÿ táº§ng háº¡ táº§ng, Ä‘á»“ Ã¡n em chÆ°a triá»ƒn khai pháº§n Ä‘Ã³.



Quy trÃ¬nh BCrypt (chi tiáº¿t tá»«ng bÆ°á»›c)
Input

password (máº­t kháº©u ngÆ°á»i dÃ¹ng)

cost (vÃ­ dá»¥ 10, 11, 12â€¦)

salt ngáº«u nhiÃªn 128-bit (16 bytes)

BÆ°á»›c 1 â€” Táº¡o salt ngáº«u nhiÃªn

BCrypt táº¡o salt 16 bytes báº±ng random máº¡nh (SecureRandom)

Salt Ä‘Æ°á»£c lÆ°u kÃ¨m trong chuá»—i hash, khÃ´ng cáº§n báº¡n tá»± lÆ°u riÃªng.

BÆ°á»›c 2 â€” EksBlowfishSetup (pháº§n â€œÄ‘áº¯tâ€ cá»§a BCrypt)

BCrypt dÃ¹ng Blowfish nhÆ°ng thay key schedule bÃ¬nh thÆ°á»ng báº±ng EksBlowfish:

Khá»Ÿi táº¡o state Blowfish (P-array, S-boxes) vá»›i háº±ng sá»‘

Trá»™n password vÃ o state

Trá»™n salt vÃ o state

Láº·p 2^cost láº§n:

ExpandKey(state, password, salt)

ExpandKey(state, password, salt)

Ã nghÄ©a: cost cÃ ng tÄƒng â†’ sá»‘ vÃ²ng tÄƒng theo lÅ©y thá»«a â†’ hash cÃ ng cháº­m.

VÃ­ dá»¥:

cost=10 â†’ 2^10 = 1024 vÃ²ng

cost=12 â†’ 2^12 = 4096 vÃ²ng (náº·ng hÆ¡n 4 láº§n)

BÆ°á»›c 3 â€” BÄƒm dá»¯ liá»‡u cá»‘ Ä‘á»‹nh báº±ng Blowfish nhiá»u láº§n

BCrypt dÃ¹ng state Blowfish vá»«a táº¡o Ä‘á»ƒ mÃ£ hoÃ¡ chuá»—i cá»‘ Ä‘á»‹nh (thÆ°á»ng lÃ  "OrpheanBeholderScryDoubt"), láº·p 64 vÃ²ng encrypt.

BÆ°á»›c 4 â€” Xuáº¥t káº¿t quáº£ dáº¡ng chuáº©n

Káº¿t quáº£ BCrypt thÆ°á»ng cÃ³ format:

$2a$10$<22chars_salt><31chars_hash>

$2a$ hoáº·c $2b$: phiÃªn báº£n BCrypt

10: cost

pháº§n tiáº¿p theo: salt + hash (base64 riÃªng cá»§a BCrypt)





1ï¸âƒ£ WebSocket lÃ  gÃ¬?

Tráº£ lá»i ngáº¯n gá»n:

WebSocket lÃ  giao thá»©c cho phÃ©p client vÃ  server giao tiáº¿p hai chiá»u (full-duplex) theo thá»i gian thá»±c trÃªn má»™t káº¿t ná»‘i TCP duy nháº¥t.



2ï¸âƒ£ Táº¡i sao dá»± Ã¡n cá»§a em dÃ¹ng WebSocket?

Tráº£ lá»i:

VÃ¬ há»‡ thá»‘ng cÃ³ chat vÃ  tÆ°Æ¡ng tÃ¡c realtime, cáº§n gá»­i dá»¯ liá»‡u ngay láº­p tá»©c mÃ  khÃ´ng pháº£i request liÃªn tá»¥c nhÆ° HTTP.

NÃ³i dá»… hiá»ƒu:

HTTP: gá»­i â†’ nháº­n â†’ Ä‘Ã³ng káº¿t ná»‘i

WebSocket: káº¿t ná»‘i 1 láº§n â†’ giá»¯ káº¿t ná»‘i â†’ gá»­i/nháº­n liÃªn tá»¥c



3ï¸âƒ£ WebSocket trong dá»± Ã¡n dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬?

ğŸ‘‰ Chat realtime (1â€“1, 1â€“n)
ğŸ‘‰ Cáº­p nháº­t tin nháº¯n ngay khi cÃ³ ngÆ°á»i gá»­i
ğŸ‘‰ Giáº£m Ä‘á»™ trá»… so vá»›i HTTP polling



4ï¸âƒ£ Luá»“ng hoáº¡t Ä‘á»™ng WebSocket (ráº¥t hay bá»‹ há»i)
Luá»“ng chuáº©n:
Client â†’ WebSocket handshake â†’ Server
Client â†” Server (gá»­i/nháº­n message liÃªn tá»¥c)

VÃ­ dá»¥ chat 1â€“1:
User A â†’ WebSocket â†’ Server â†’ WebSocket â†’ User B


ğŸ‘‰ Server Ä‘Ã³ng vai trÃ² trung gian (broadcast / forward message)




5ï¸âƒ£ WebSocket cháº¡y trÃªn TCP hay UDP?

ğŸ‘‰ TCP

Giáº£i thÃ­ch ngáº¯n:

WebSocket cháº¡y trÃªn TCP

Äáº£m báº£o:

khÃ´ng máº¥t gÃ³i

Ä‘Ãºng thá»© tá»±

phÃ¹ há»£p chat, tin nháº¯n



6ï¸âƒ£ WebSocket lÃ  Ä‘a luá»“ng hay Ä‘Æ¡n luá»“ng?

ğŸ‘‰ Äa luá»“ng

Giáº£i thÃ­ch:

Má»—i client WebSocket káº¿t ná»‘i tá»›i server

Server xá»­ lÃ½ nhiá»u káº¿t ná»‘i cÃ¹ng lÃºc

Spring Boot quáº£n lÃ½ thread cho tá»«ng connection



7ï¸âƒ£ WebSocket cÃ³ báº£o máº­t khÃ´ng?

ğŸ‘‰ CÃ³, nhÆ°ng pháº£i káº¿t há»£p thÃªm

Trong dá»± Ã¡n cá»§a báº¡n:

WebSocket cháº¡y song song vá»›i JWT

Token Ä‘Æ°á»£c gá»­i khi handshake (header hoáº·c query)

Server kiá»ƒm tra token â†’ má»›i cho káº¿t ná»‘i

ğŸ‘‰ KhÃ´ng pháº£i ai cÅ©ng connect Ä‘Æ°á»£c WebSocket